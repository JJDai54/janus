<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <title>EditList</title>

  
  
  <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script>
  
  <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPhp.js"></script>
  
  <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js"></script>
  
  <link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCoreDefault.css">

  
  <script type="text/javascript">
SyntaxHighlighter.config.stripBrs = true;
SyntaxHighlighter.config.bloggerMode = true;
SyntaxHighlighter.all();
  </script>
  
  <link rel="stylesheet" type="text/css" media="all" title="Style sheet" href="doc.css">

</head><body>
<p class="comTitle blockTitle" style="text-align: center; font-weight: bold;"><span></span><big><big><big>Notation 1.1 pour Xoops</big></big></big></p>

<p class="comTitle blockTitle" style="text-align: center; font-weight: bold;"><br>
</p>

<p class="comTitle blockTitle" style="text-align: center; font-weight: bold;"><big><big><big><br>
</big></big></big></p>

Auteur: <a href="http://www.dhtmlgoodies.com/">Jean-Jacques DELALANDRE</a><br>

Licence : GPL<br>

Site:&nbsp;<a href="http://www.dhtmlgoodies.com/">http://www.janus.com</a><br>
<br>

<br>

<h1><a class="mozTocH1" name="mozTocId629007"></a>Sommaire</h1>

<ol id="mozToc">

<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->
  <li><a href="#mozTocId629007">Sommaire</a></li>
  <li><a href="#mozTocId360156">Présentation:</a></li>
  <li><a href="#mozTocId769712">Installation</a></li>
  <li><a href="#mozTocId623962">Utilisation</a>
    <ol>
      <li><a href="#mozTocId38444">initialisation</a></li>
      <li><a href="#mozTocId341864">&nbsp;
Paramètres du constructeur:</a></li>
    </ol>
  </li>
  <li><a href="#mozTocId526622">Options
complémentaires</a></li>
  <li><a href="#mozTocId327980">Exemple</a></li>
</ol>

<span style="font-weight: bold;"><br>
<br>
</span><br>

<a href="#mozTocId629007"><img src="images/home.gif" align="right"></a>
<h1><a class="mozTocH1" name="mozTocId360156"></a>Présentation:</h1>

<p>Ce composant permet d'afficher une note, ou d'affecter une note.</p>
<p>Il affiche la moyenne en mode 'read"</p>
<p>Il permet d'affecter une note en mode "write" en survolant l'image et en cliqant sur la note souhaitée.</p>
<p><br>
</p>
<img src="file:///c:/temp/moz-screenshot-2.jpg" alt=""><br>
<br>
<p>Le composant ne fait aucune opération en base de données, il est à la charge du module qui l'utilse de la faire.</p>
<p>Cependant il est possible de s'inspirer ou d'utilser la table jjd_notation du module jjd_tools.</p>
<p>La table doir comporter les champs pertinents pour stosker et calculer les valeurs nécessaires.</p>
<table style="text-align: left; width: 664px; height: 86px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">champ<br>
      </td>
      <td style="vertical-align: top;">type<br>
      </td>
      <td style="vertical-align: top;">primaryKey<br>
      </td>
      <td style="vertical-align: top;">description<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">modid<br>
      </td>
      <td style="vertical-align: top;">log<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold;">X<br>
      </td>
      <td style="vertical-align: top;">Identifiant du module<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">name<br>
      </td>
      <td style="vertical-align: top;">string<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold;">X<br>
      </td>
      <td style="vertical-align: top;">Une chaine de caactère pour identifiant l'objet à noter.<br>
Ce la peur être le nom d'une table par exemple<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">id<br>
      </td>
      <td style="vertical-align: top;">long<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold;">X<br>
      </td>
      <td style="vertical-align: top;">Identifiant l'elément à noter.<br>
Cela peut être l'dentifiant de l'enregistrement d'une table<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">noteSum<br>
      </td>
      <td style="vertical-align: top;">long<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold;"><br>
      </td>
      <td style="vertical-align: top;">Cumul des notes pour la clé "modid,name,id"<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">noteCount<br>
      </td>
      <td style="vertical-align: top;">long<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold;"><br>
      </td>
      <td style="vertical-align: top;">Nombre de note affecterpour la clé "modid,name,id"</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">noteAverage<br>
      </td>
      <td style="vertical-align: top;">float<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;">Moyene = noteSum / noteCount<br>
A chaque nouvelle notation, la moyenne doit êter recalculée.<br>
      </td>
    </tr>
  </tbody>
</table>
<p><br>
</p>
<p><br>
</p>

<p><span style="font-weight: bold;"><br>
</span></p>
<br>
<ul>

</ul>

<p><br>
</p>

<a href="#mozTocId629007"><img src="images/home.gif" align="right"></a>
<h1><a class="mozTocH1" name="mozTocId769712"></a>Installation</h1>

<p>Copier le&nbsp;dossier complet dans le répertoire
"class/xoopsform/" du site.</p>

<p style="text-align: center;"><img style="width: 479px; height: 186px;" alt="" src="images/installation-01.png"><br>
</p>

<br>

<p>Les
fichiers <span style="font-weight: bold;">"index.html"</span>
ne sont pas listés dans ce tableau, mais doivent
restés ans chaque dossier pour empêcher leur parcours via le navigateur.<br>
</p>

<table style="text-align: left; width: 850px; height: 410px;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center; font-weight: bold; background-color: rgb(255, 255, 204);">Dossier<br>
      </td>
      <td style="vertical-align: top; font-weight: bold; background-color: rgb(255, 255, 204);">Fichier</td>
      <td style="vertical-align: top; text-align: center; font-weight: bold; background-color: rgb(255, 255, 204);">Description<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold; background-color: rgb(255, 255, 204);">Prod<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold; background-color: rgb(255, 255, 204);">Dev<br>
      </td>
      <td style="vertical-align: top; text-align: center; font-weight: bold; background-color: rgb(255, 255, 204);">Doc<br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="2" style="vertical-align: top;">notation<br>
      </td>
      <td style="vertical-align: top;">changelog.txt</td>
      <td style="vertical-align: top;">Historique du
composant<br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;"></span><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;">X</span> </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">formnotation.php</td>
      <td style="vertical-align: top;">Classe xoopsform à
inclure dans
le projet<br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;">X</span> </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;"><br>
</td>
      <td style="vertical-align: top;"><br>
</td>
      <td style="vertical-align: top;"><br>
</td>
      <td style="vertical-align: top; text-align: center;"><br>
</td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;"><br>
      </span> </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;">/images/icons/</td>
      <td style="vertical-align: top;">default<br>
stars<br>
rectangles=32x14<br>
</td>
      <td style="vertical-align: top;">Chaque sus dossier correspon a u jeu d'image de même taille<br>
</td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;">X</span>
      </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;"></span> <br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;">/ressources/<br>
      </td>
      <td style="vertical-align: top;">notation.css<br>
notation.js<br>
</td>
      <td style="vertical-align: top;">Feuille de style, script javascript, ...<br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;">X</span> </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;">/doc/</td>
      <td style="vertical-align: top;">notation-french.html</td>
      <td style="vertical-align: top;">Documentation du
composant</td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><br>
      </td>
      <td style="vertical-align: top; text-align: center;"><span style="font-weight: bold;">X</span></td>
      <td><br>
      </td>
    </tr><tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>

  </tbody>
</table>

<br>

<br>

<br>

<a href="#mozTocId629007"><img src="images/home.gif" align="right"></a>
<h1><a class="mozTocH1" name="mozTocId623962"></a>Utilisation</h1>

<br>

<h2><a class="mozTocH2" name="mozTocId38444"></a><a class="mozTocH2" name="#mozTocId450970"></a>
initialisation</h2>

<div class="code">
<pre class="brush: php;">//inclure la classe dans le cas ou le composant n'est pas intégré dans xoops<br>include_once (XOOPS_ROOT_PATH . "/class/xoopsform/notation/formnotation.php");");<br><br>//Instanciation de la classe<br>$obj = new XoopsEditList ($caption, $name, $value, $size);<br><br>//Affichage du sélecteur dans un template.<br>$xoopsTpl-&gt;assign('multiUploads', $obj-&gt;render());<br><br>//ou bien directement:<br>// echo $obj-&gt;render();<br><br></pre>
</div>

<br>

<br>

<br>

<h2><a class="mozTocH2" name="mozTocId341864"></a>
&nbsp; Paramètres du constructeur:</h2>

<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; font-weight: bold; text-align: center;">Paramètre<br>
      </td>
      <td style="vertical-align: top; font-weight: bold; text-align: center;">type</td>
      <td style="vertical-align: top; font-weight: bold; text-align: center;">Défaut</td>
      <td style="vertical-align: top; font-weight: bold; text-align: center;">description<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">$caption</td>
      <td style="vertical-align: top;">string<br>
      </td>
      <td style="vertical-align: top;">Obligatoire<br>
      </td>
      <td style="vertical-align: top;">Titre affiché<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">$name</td>
      <td style="vertical-align: top;">string<br>
      </td>
      <td style="vertical-align: top;">Obligatoire</td>
      <td style="vertical-align: top;">Nom du composant
qui sera récupérer après validation du formulaire;.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">$value</td>
      <td style="vertical-align: top;">string<br>
      </td>
      <td style="vertical-align: top;">Obligatoire</td>
      <td style="vertical-align: top;">Valeur&nbsp;</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">$size</td>
      <td style="vertical-align: top;">string<br>
      </td>
      <td style="vertical-align: top;">optionaelle</td>
      <td style="vertical-align: top;">Largeur de la zone
en caractères<br>
Le dossier doit exister et être en chmod "0777".<br>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>

<h1><a class="mozTocH1" name="mozTocId526622"></a>Options
complémentaires</h1>

Important: la classe hérite de xoopsFormSelect et possede donc les même
caractéristiques.<br>

<br>

<h2>Méthodes de la classe xoopsFormeditList</h2>

&nbsp;<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td colspan="1" rowspan="3">addOptionArray($tOptions);</td>
      <td>Prototype:<br>
      <span class="prototype">function<span style="font-weight: bold;">
addOptionArray</span>($tOptions)</span>
      </td>
    </tr>
    <tr>
      <td>Paramètres<br>
      <span style="font-weight: bold;">$tOptions</span>:
tableau des options à afficher dans la liste déroulante<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></td>
    </tr>
    <tr>
      <td>Commentaires:<br>
&nbsp;hérité de xoopsFormselect</td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3">setBackground</td>
      <td>Prototype:<br>
      <span class="prototype">function&nbsp;<span style="font-weight: bold;">setBackground($</span></span><span class="prototype"><span style="font-weight: bold;">background</span></span><span class="prototype"><span style="font-weight: bold;">)</span></span><span style="font-weight: bold;"></span><br>
      </td>
    </tr>
    <tr>
      <td>Paramètres:<br>
      <span style="font-weight: bold;">$background</span>
: Couleur de fond d la liste déroulante</td>
    </tr>
    <tr>
      <td>Commentaires:<br>
Pour la couleur de fond de la zone de saisie utiliser la méthose '<span style="font-weight: bold;">setExtra</span>'</td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3">setHeight</td>
      <td>Prototype:<br>
      <span class="prototype">function&nbsp;<b>etHeight(120);</b>($height)</span></td>
    </tr>
    <tr>
      <td>Paramètres:<br>
      <span style="font-weight: bold;">$height</span>
: Int : hauteur de la liste déroulante en pixel<br>
      </td>
    </tr>
    <tr>
      <td>Commentaires:<br>
Ce parametre est un entier.</td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3">setExtra</td>
      <td>&nbsp;Prototype:<br>
      <span class="prototype">function&nbsp;<b>setExtra($extra)</b></span></td>
    </tr>
    <tr>
      <td>Paramètres:<br>
      <span style="font-weight: bold;">$extra</span>:
string : cette valeur sera ajouter dans les attribut de la zone de
texte. </td>
    </tr>
    <tr>
      <td>Commentaires:<br>
&nbsp;hérité de xoopsFormselect<br>
exemple : <br>
$objet-&gt;etExtra("style='background-color: #C4DDF3'"); // defini
la couleur de fond de la zone de texte<br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3">render</td>
      <td>Prototype:<br>
      <span class="prototype">function <b>render</b>()</span></td>
    </tr>
    <tr>
      <td>Paramètres: aucun</td>
    </tr>
    <tr>
      <td>Commentaire:<br>
hérité de xoopsFormselect -&gt; XoopsFormElement<br>
Renvoi le code HTML pur l'affichage du sélecteur de
fichier dans la page du site.</td>
    </tr>
  </tbody>
</table>

<br>

<br>

<h2>Fonctions Javascript</h2>

<br>

<br>

<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="width: 182px;" colspan="1" rowspan="3">refreshEditableSelect</td>
      <td style="width: 642px;">Prototype:<br>
      <span class="prototype">function <b>refreshEditableSelect</b>(sName)</span><big><span class="prototype"><span style="font-weight: bold;"></span></span><span style="font-weight: bold;"></span></big><span class="prototype"></span></td>
    </tr>
    <tr>
      <td style="width: 642px;">Paramètres:<br>
      <span style="font-weight: bold;">sName</span> : String : Nom
donner à l'objet dans la classe <span style="font-weight: bold;">xoopsFormEditList</span>.</td>
    </tr>
    <tr>
      <td style="width: 642px;">Commentaire:<br>
Normalement il n'y a pas besoin d'appeler directement les fonctions
javaScript du composant;<br>
Cependant
il s'avère que dans certains cas, l'affichage n'est pas correcte,
notammnet quand le composant est dans un conteneur masqué
(visible=hidden). il semble que cela désactive certaine fonctionalités
du CSS.<br>
Ce cas eut arriver par exemple avec une gestion d'onglets qui affiche
que l'onglet courant et masque les autres.<br>
Pour palier ce problème, il est possible d'appeler la
fonction "<span style="font-weight: bold;">refreshEditableSelect(sName)</span>"
juste après avoir rendu l'objet
conteneur visible.<br>
Si le conteneur était visible lors de la création de la page, il n'est
pa utile d'appeler cette fonction.<br>
Il n'est pas nécéssaire non plus de l'appeler à chaque fois qu'on rend
le conteneur visible, la première fois suffit.<br>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>

<a href="#mozTocId629007"><img src="images/home.gif" align="right"></a>
<h1><a class="mozTocH1" name="mozTocId327980"></a>Exemple</h1>

<br>

<div class="code">
<pre class="brush: php;"> //Definion des parametres du composant<br> $caption = 'Catégorie';<br> $name='categorie';<br> $value='essence';<br> $width = 30;<br> <br> //Liste de valeur de la liste déroulante<br> $tCharges = array('divers','Frais professionels','Fonctionnement','Transport');<br> <br> //instancie le composant<br> $xf = new XoopsEditList($caption, $name, $value,$width ) ; <br><br> //ajout de la liste de valeur<br> $xf-&gt;addOptionArray($tCharges);<br><br> //Couleur de fond de la liste déroulante<br> $xf-&gt;setBackground('#E6C755');<br><br> //Hauteur de la liste<br> $xf-&gt;setHeight(120);<br><br> //Style de la zone de texte saisissable<br> $xf-&gt;setExtra("style='background-color: #D0F8AA'");<br> <br> //affiche de liste modifiable<br> echo $sf-&gt;render();<br><br></pre>
</div>

<br>

<br>

<p align="center">
<br>
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*<br>
<br>
*<br>
</p>

<br>

<br>
</body></html>